# Клиенты

Клиенты – специальные классы PHP-библиотеки. Методы этих классов реализуют запросы к ресурсам партнерского API Маркета. Ресурсы сгруппированы в клиенты по тематикам: показ товаров, цены, связи между товарами на Маркете и вашими и т. д.

Чтобы отправлять запросы, создайте экземпляры нужных клиентов и вызывайте их методы. При создании экземпляра клиента нужно указать авторизационные данные. Например, получим цены товаров, установленные через API:

```php
// Указываем авторизационные данные
$clientId = '9876543210fedcbaabcdef0123456789';
$token = '01234567-89ab-cdef-fedc-ba9876543210';
// Указываем идентификатор магазина (он требуется для большинства методов)
$campaignId = '10001';
// Создаем экземпляр клиента для работы с ценами
$pricesClient = new \Yandex\Marketplace\Partner\Clients\PricesClient($clientId, $token);
// Получаем список цен
$prices = $pricesClient->getOfferPrices($campaignId);
```

# Итераторы

Выходные данные методов, возвращающих информацию о нескольких объектах (например, список магазинов), содержат итератор по этим объектам. Итератор позволяет получить текущий объект (метод `current`), перейти к следующему (метод `next`), получить количество объектов (метод `count`). Например, получим информацию о магазинах пользователя Яндекса, на которого зарегистрировано приложение:

```php
// Создаем экземпляр клиента с базовыми методами
$baseClient = new \Yandex\Market\Partner\Clients\BaseClient($clientId, $token);
// Получаем объект с магазинами
$campaignsObject = $baseClient->getCampaigns();
// Получаем итератор по магазинам
$campaigns = $campaignsObject->getCampaigns();
// Получаем количество магазинов
$campaignsCount = $campaigns->count();
// Получаем первый магазин
$campaign = $campaigns->current();
// Получаем следующий магазин
$campaign = $campaigns->next();
```

Если метод возвращает итератор или содержит его в выходных данных, это указано в [описании метода](Методы). Все методы с [постраничным возвратом](#Постраничный-возврат) содержат в выходных данных итератор.

# Постраничный возврат

Некоторые методы возвращают результаты постранично. В выходных данных содержится идентификатор следующей страницы, который можно получить вызовом метода `getNextPageToken`, а затем передать в аргументе `page_token`, чтобы получить страницу:

```php
// Получаем список цен, установленных через API
$offerPrices = $priceClient->getOfferPrices($campaignId);
// Получаем идентификатор следующей страницы
$offerPricesNextPageToken = $offerPrices->getNextPageToken();
// Получаем следующую страницу
$offerPrices = $priceClient->getOfferPrices($campaignId, ['page_token' => $offerPricesNextPageToken,]);
```

Также в выходных данных содержится [итератор](#Итераторы) по результатам текущей страницы.

Если метод возвращает результаты постранично, это указано в [его описании](Методы).